# mditor 3.0 PRD

## 功能清单

| 功能 | 说明 | 状态 |
|------|------|------|
| **Settings 面板** | 字号调整、检查更新 | ✅ 已完成 |
| **状态栏重设计** | 左：字数 / 中："mditor"→官网 / 右：模式 | ✅ 已完成 |
| **文件名交互** | 位置未定→另存为 / 位置已定→重命名 / ▾下拉菜单 | ✅ 已完成 |
| **// 命令菜单** | 底部「查看全部」→ 完整命令分组（标题/格式/结构/高级） | ✅ 已完成 |
| **幽灵提示** | 空文档显示「输入 // 插入格式...」打字即消失 | ✅ 已完成 |
| **右键新建** | 安装时注册「新建 Markdown 文档」，默认勾选 | ✅ 已完成 |
| **主题继承** | 修复双击文件打开时主题不继承 localStorage 的问题 | ✅ 已完成 |
| **欢迎页** | 仅在无文件参数启动时显示（简洁新建页） | ✅ 已完成 |
| **文档图标** | 文档形状 + "mditor" 文字（桌面右下角 / 文件夹居中） | ✅ 已完成 |

---

## 详细设计

### 1. Settings 面板
- 入口：标题栏齿轮图标
- 内容：
  - 字号调整（滑块或 +/- 按钮）
  - 检查更新按钮

### 2. 状态栏布局
```
┌─────────────────────────────────────────────────┐
│  1234 字        mditor        阅读模式          │
│    ↑              ↑              ↑              │
│  左侧          中间(可点击)     右侧            │
└─────────────────────────────────────────────────┘
```
- 中间 "mditor" 点击后打开官网

### 3. 文件名交互

**状态驱动逻辑：**
| 场景 | 文件位置 | 点击文件名 |
|------|---------|-----------|
| 图标启动 → + 新建 | 未定 | → 另存为 |
| 应用内快捷键新建 | 未定 | → 另存为 |
| 右键「新建 Markdown」| 已定 | → 重命名 |
| 双击已有 .md 打开 | 已定 | → 重命名 |

**下拉菜单 ▾：**
```
  demo.md 🟠 ▾
            │
            ▼
     ┌──────────────────┐
     │  保存         Ctrl+S       │
     │  另存为...   Ctrl+Shift+S  │
     │  ──────────────────       │
     │  在文件夹中显示            │
     └──────────────────┘
```

### 4. // 命令菜单
```
// 触发默认菜单：        点击「查看全部」展开：
┌─────────────┐         ┌─────────────────────────┐
│ H1      ⌘1  │         │ 标题   H1 H2 H3 H4 H5 H6│
│ H2      ⌘2  │         │ 格式   粗 斜 删 代码 高亮 │
│ 列表    ⌘L  │    →    │ 结构   列表 任务 引用 分割│
│ 引用    ⌘Q  │         │ 高级   表格 链接 图片 脚注│
│ ──────────  │         └─────────────────────────┘
│ 查看全部 →  │
└─────────────┘
```

### 5. 幽灵提示
- 空文档时在光标处显示灰色文字：`输入 // 插入格式...`
- 用户开始打字后立即消失
- 不打扰，仅作引导

### 6. 右键新建
- Windows 安装器注册右键菜单「新建 → Markdown 文档」
- 安装时默认勾选，用户可取消
- NSIS 脚本实现

### 7. 主题继承
- 问题：双击 .md 文件打开时，主题不读取 localStorage
- 修复：确保 app 启动时正确读取并应用保存的主题

### 8. 欢迎页
- 仅在无文件参数启动时显示（点击图标启动）
- 双击 .md 文件启动时直接打开文档，不显示欢迎页

### 9. 文档图标
```
Windows 桌面 (大图标)        Windows 文件夹 (小图标)
┌─────────┐                 ┌─────────┐
│  ≡≡≡≡   │                 │         │
│  ≡≡≡    │                 │ mditor  │  ← 文字居中
│         │                 │         │
│  mditor │ ← 文字右下角    └─────────┘
└─────────┘
```
- macOS：遵循系统规范
