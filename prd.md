# mditor - 产品需求文档 (PRD)

> **极简 Markdown 编辑器** - 灵感来自 Typora 和 Obsidian，追求沉浸式写作体验

---

## 1. 产品愿景

### 核心理念
**"消失的 UI"** - 让用户专注于内容本身，而非工具本身。

mditor 不是功能繁多的编辑器，而是一个 **精致、极简、沉浸** 的 Markdown 写作工具。

### 目标用户
- 追求简洁的写作者
- Markdown 重度用户
- 喜欢 Typora/Obsidian 但希望更轻量的用户

---

## 2. 核心功能

### 2.1 阅读模式 (Reading Mode)
| 功能 | 描述 |
|------|------|
| **渲染预览** | Markdown 实时渲染为优雅的排版 |
| **目录导航** | 自动提取标题生成大纲 |
| **主题切换** | 亮色/暗色模式一键切换 |
| **Focus Mode** | 高亮当前段落，淡化其他内容 |

### 2.2 编辑模式 (Editing Mode)
| 功能 | 描述 |
|------|------|
| **源码编辑** | 基于 CodeMirror 6 的高性能编辑器 |
| **语法高亮** | Markdown 语法着色 |
| **实时保存** | 2秒无操作自动保存 |
| **斜杠命令** | 输入 `//` 快速插入格式 |

### 2.3 文件管理
| 功能 | 描述 |
|------|------|
| **文件树** | Obsidian 风格，只显示 .md 文件和文件夹 |
| **父目录导航** | 点击返回上级目录 |
| **多窗口** | 每个文件独立窗口 |
| **文件关联** | 双击 .md 文件直接打开 |

---

## 3. 设计原则

### 3.1 极简主义
- **无边框窗口** - 沉浸感最大化
- **隐藏菜单栏** - 减少干扰
- **三态侧边栏** - 隐藏 / 目录 / 文件树

### 3.2 Obsidian 风格文件树
与 Obsidian 的区别：
- **无 Vault 概念** - 直接打开任何文件夹
- **更沉浸** - 默认只显示当前目录
- **可导航** - 支持上下层级切换
- **只显示 .md** - 过滤其他文件类型

### 3.3 斜杠命令 `//`
输入 `//` 触发格式选择器：
- `# ` 标题 1-3
- `**` 粗体
- `*` 斜体
- `` ` `` 代码
- `> ` 引用
- `- ` 列表
- `---` 分割线

选择后 `//` 自动删除，取消则保留。

---

## 4. 用户体验要求

### 4.1 快捷键
| 快捷键 | 功能 |
|--------|------|
| `Ctrl+E` | 切换阅读/编辑模式 |
| `Ctrl+S` | 保存文件 |
| `Ctrl+N` | 新建文件 |
| `Ctrl+O` | 打开文件 |
| `Ctrl+\` | 切换侧边栏 |
| `Ctrl+Shift+S` | 另存为 |

### 4.2 性能要求
- 启动时间 < 2秒
- 大文件 (> 10MB) 不卡顿
- 实时保存延迟 2秒

### 4.3 平台支持
- Windows 10/11
- macOS 10.15+
- Linux (Ubuntu 20.04+)

---

## 5. 技术栈

| 层级 | 技术 |
|------|------|
| **框架** | Electron |
| **编辑器** | CodeMirror 6 |
| **Markdown** | marked.js + DOMPurify |
| **构建** | esbuild |
| **打包** | electron-builder |

---

## 6. 版本规划

### v2.x (当前)
- [x] 多窗口支持
- [x] 无边框窗口
- [x] 文件树 (Obsidian 风格)
- [x] 实时自动保存
- [x] 斜杠命令 `//`

### v3.x (规划)
- [ ] Live Preview (所见即所得)
- [ ] 图片粘贴上传
- [ ] 插件系统
- [ ] 云同步

---

## 7. 已知问题

| 问题 | 状态 |
|------|------|
| 斜杠命令 `//` 删除逻辑 | ✅ 已修复 (v2.5.0) |
| 文件树只显示 md 文件 | ✅ 已实现 |
| 内容区宽度自适应 | ✅ 已完成 (v2.5.0) |
| 滚动条优化 | ✅ 已完成 (v2.5.0) |

---

## 8. 设计参考

- **Typora** - WYSIWYG 体验、极简 UI
- **Obsidian** - 文件树导航、双链概念
- **iA Writer** - 专注模式、打字机模式

---

*Last Updated: 2026-01-18*
